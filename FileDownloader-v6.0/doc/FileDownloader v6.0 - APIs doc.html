<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="872"/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div style="font-size: 16px;"><font face="Consolas">FileDownloader module enables you to download a web resource easily with the resource URL given. Users can manually choose the download threads number for each task. The </font></div><div style="font-size: 16px;"><font face="Consolas">module internally integrates sql-lite to record the download process which makes resume download feature become possible.</font></div><div style="font-size: 16px;"><b><font face="Consolas"><br/></font></b></div><div style="font-size: medium;"><div style="font-size: 16px;"><div><b><font face="Consolas">1. </font><span style="font-family: Consolas;">Constructor and Utils</span></b></div></div></div><div style="font-size: medium;"><span style="font-family: Consolas; font-size: 15px;"><br/></span></div><div style="font-size: medium;"><span style="font-family: Consolas; font-size: 15px;">1)  Constructor</span></div><div style="font-size: medium;"><span><font face="Consolas"><span style="font-size: 11pt;">   </span></font> <font color="#7F0055" face="Consolas"> <span style="font-size:11pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">FileDownloader</span> <span style="font-size:11pt">(Context context, String url, String path, </span></font><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">threadNum)</span></font></span></div><div style="font-size: medium;"><font face="Consolas"><span style="font-size: 15px;">     @para</span></font></div><div style="font-size: medium;"><font face="Consolas"><span style="font-size: 15px;">          url: web resource url string.</span></font></div><div style="font-size: medium;"><font face="Consolas"><span style="font-size: 15px;">          path: the specific local directory where you want to store the downloaded resource.</span></font></div><div style="font-size: 16px;"><span><b><font face="Consolas">         </font></b><span style="font-family: Consolas; font-size: 15px;">url: set thread numbers for the download task.</span><b><font face="Consolas"> </font></b></span></div><div style="font-size: 16px;"><b><font face="Consolas"><br/></font></b></div><div style="font-size: medium;"><span><span style="font-family: Consolas; font-size: 15px;">2)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt;"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size: 11pt;"><b>int</b></span></font><font face="Consolas"><span style="font-size: 11pt;"> </span><span style="font-size: 11pt;">getTaskId</span> <span style="font-size: 11pt;">()</span></font><font face="Consolas"><span style="font-size: 11pt;">  </span></font><font color="#7F0055" face="Consolas"> </font></span></div><div style="font-size: medium;"><span><font face="Consolas"><span style="font-size: 15px;">     </span></font><span style="font-size: 15px; font-family: Consolas;">@return</span></span></div><div><font face="Consolas"><span style="font-size: 15px;">          the unique task Id allocated for the download task.</span></font></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="Consolas"><span style="font-size: 15px;">@description</span></font></div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="Consolas"><span style="font-size: 15px;">After the FileDownloader class is instantiated, a unique task Id is allocated for the               download task and remains unchanged. </span></font></div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="Consolas"><span style="font-size: 15px;"><br/></span></font></div></blockquote><div><span><span style="font-family: Consolas; font-size: 15px;">3)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt;"><b>public</b></span></font> <font face="Consolas"><span style="font-size: 11pt;">String </span><span style="font-size: 11pt;">getFullPath</span> <span style="font-size: 11pt;">()</span></font><span style="color: rgb(127, 0, 85); font-family: Consolas;"> </span></span></div><div><span><font face="Consolas"><span style="font-size: 15px;">    </span></font><font face="Consolas"><span style="font-size: 15px;"> </span></font><span style="font-size: 15px; font-family: Consolas;">@return</span></span></div><div><span><span style="font-size: 15px; font-family: Consolas;">          local full path of the download file.</span><b style="font-size: 16px;"><font face="Consolas"> </font></b></span></div><div><b style="font-size: 16px;"><font face="Consolas"><br/></font></b></div><div><span><span style="font-family: Consolas; font-size: 15px;">4)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt;"><b>public</b></span></font> <font face="Consolas"><span style="font-size: 11pt;">int </span></font><span style="font-size: 11pt; font-family: Consolas;">getFileLength()</span></span></div><div><span><font face="Consolas"><span style="font-size: 15px;">    </span></font><font face="Consolas"><span style="font-size: 15px;"> </span></font><span style="font-size: 15px; font-family: Consolas;">@return</span></span></div><div><span><span style="font-size: 15px; font-family: Consolas;">          file length of the download file.</span><b style="font-size: 16px;"><font face="Consolas"> </font></b></span></div><div><b style="font-size: 16px;"><font face="Consolas"><br/></font></b></div><div><span><span style="font-family: Consolas; font-size: 15px;">5)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>public</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">String getFilename()</span></font></span></div><div><span><font face="Consolas"><span style="font-size: 15px;">    </span></font><font face="Consolas"><span style="font-size: 15px;"> </span></font><span style="font-size: 15px; font-family: Consolas;">@return</span></span></div><div><span><span style="font-size: 15px; font-family: Consolas;">          filename(without directory path) of the download file.</span><b style="font-size: 16px;"><font face="Consolas"> </font></b></span></div><div style="font-size: 16px;"><b><font face="Consolas"><br/></font></b></div><div style="font-size: 16px;"><hr/></div><div style="font-size: 16px;"><b><font face="Consolas">2. </font><span style="font-family: Consolas;">Operations</span></b></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><div style="font-size: 16px;"><font face="Consolas" style="font-size: medium;"><span style="font-size: 15px;">FileDownloader provides operation methods for you to control download task like start a          </span></font></div><span style="font-family: Consolas; font-size: 15px;">download task or pause a download task.</span></div></blockquote><div style="font-size: medium;"><span style="font-family: Consolas; font-size: 15px;"><br/></span></div><div style="font-size: medium;"><span><span style="font-family: Consolas; font-size: 15px;">1)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>void</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">runDownload</span> <span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">()</span></font></span></div><div style="font-size: medium;"><span><font face="Consolas"><span style="font-size: 11pt;">    </span></font><span style="font-family: Consolas; font-size: 15px;">@description</span></span></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="Consolas"><span style="font-size: 15px;">Start or resume a download task</span></font></div></blockquote></blockquote><div style="font-size: medium;"><span><br/></span></div><div><div style="font-size: medium;"><span><span style="font-family: Consolas; font-size: 15px;">2)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>void</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">pauseDownload</span> <span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">()</span></font></span></div><div style="font-size: medium;"><span><font face="Consolas"><span style="font-size: 11pt;">    </span></font><span style="font-family: Consolas; font-size: 15px;">@description</span></span></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><div style="font-size: medium;"><font face="Consolas"><span style="font-size: 15px;">Pause a download task</span></font></div></blockquote></blockquote><font face="Consolas"><span style="font-size: 15px;"><br/></span></font></div><div><div><span><span style="font-family: Consolas; font-size: 15px;">3)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>void</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">cancelDownload()</span></font></span></div><div><span><font face="Consolas"><span style="font-size: 11pt;">    </span></font><span style="font-family: Consolas; font-size: 15px;">@description</span></span></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><font face="Consolas"><span style="font-size: 15px;">Cancel a download task; Cancel operation will delete the downloaded file(maybe unfinished) and clear the record data in Database.</span></font></blockquote></blockquote><font face="Consolas"><span style="font-size: 15px;"><br/></span></font></div><div><div><span><span style="font-family: Consolas; font-size: 15px;">4)  </span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>void</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">reDownload</span> <span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">()</span></font></span></div><div><span><font face="Consolas"><span style="font-size: 11pt;">    </span></font><span style="font-family: Consolas; font-size: 15px;">@description</span></span></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><font face="Consolas"><span style="font-size: 15px;">First call cancelDownload() and then runDownload();</span></font></blockquote></blockquote></div><div><font face="Consolas"><span style="font-size: 15px;"><br/></span></font></div><div><hr style="font-size: medium;"/><div style="font-size: 16px;"><b><font face="Consolas">3. Listener Interfaces</font></b></div></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font face="Consolas"><span style="font-size: 15px;">User can monitor the downloading process and execute user customized callbacks at the right time by implement the Interfaces provided. </span></font></div><div><font face="Consolas"><span style="font-size: 15px;"><br/></span></font></div><div><font face="Consolas"><span style="font-size: 15px;">@paras</span></font></div><div><span><font face="Consolas"><span style="font-size: 15px;">     </span></font><span style="font-family: Consolas; font-size: 15px;"> downloaderId: to identify which task is calling back.</span></span></div><div><span><font face="Consolas"><span style="font-size: 15px;">      </span></font><span style="font-family: Consolas; font-size: 15px;">fileLength: the download file length.</span></span></div><div><span style="font-family: Consolas; font-size: 15px;">      </span><span style="font-family: Consolas; font-size: 15px; text-align: -webkit-left;">totalDoneSize: the size that has already been downloaded when initialized.</span></div><div><span style="font-family: Consolas; font-size: 15px; text-align: -webkit-left;">      </span><span style="font-size: 15px; font-family: Consolas;">resumeStatusCode: different codes represent different state when download task is  </span></div><div><font face="Consolas"><span style="font-size: 15px;">                        initialized. (see 4-1)</span></font></div><div><font face="Consolas"><span style="font-size: 15px;">     </span></font></div><div><span><font face="Consolas"><span style="font-size: 15px;">      </span></font><span style="font-family: Consolas; font-size: 15px;">segId: to identify the segment which is calling back. </span></span></div><div><span style="font-family: Consolas; font-size: 15px;">      </span><span style="font-family: Consolas; font-size: 15px; text-align: -webkit-left;">segLength: length of </span><span style="font-family: Consolas; font-size: 15px;">segment-segId.</span></div><div><span><font face="Consolas"><span style="font-size: 15px;">      </span></font><span style="font-size: 15px; font-family: Consolas;">curPos: current download position of segment-segId.</span></span></div><div><span style="font-family: Consolas; font-size: 15px;">     </span> <span style="font-family: Consolas; font-size: 15px;">curPos: beginning position allocated to segment-segId.</span><span style="font-family: Consolas; font-size: 15px;">   </span></div><div><span style="font-family: Consolas; font-size: 15px;">      endPos: end position allocated to segment-segId.</span><span style="font-family: Consolas; font-size: 15px;">  </span></div><div><span style="font-family: Consolas; font-size: 15px;"><br/></span></div><div><font face="Consolas"><span style="font-size: 15px;">      errInfo: error information.</span></font></div><div><font face="Consolas"><span style="font-size: 15px;"><br/></span></font></div></blockquote><span><b style="font-size: 16px;"><font face="Consolas">3-1. </font></b><span style="font-size: 11pt; font-family: Consolas;"><b>onDownloadProcessListener</b></span><b style="font-size: 16px;"><font face="Consolas"> Interface</font></b></span><div style="font-size: medium;"><span style="font-family: Consolas; font-size: 15px;"><br/></span></div><div align="left"><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onResumeSession(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">resumeStatusCode,</span></font></span></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">                        </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">fileLength,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">totalDoneSize);</span></font></span></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onInProcess(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">segId,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">curPos,</span></font></span></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">                        </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">begPos,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">endPos,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">totalDoneSize);</span></font></span></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onAccomplish(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId);</span></font></span></div></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><div><b><span style="text-align: -webkit-auto; font-size: 16px;"><font face="Consolas">3-2. </font></span><span style="font-size: 11pt; font-family: Consolas;">onOperationResultListener</span><span style="text-align: -webkit-auto; font-size: 16px;"><font face="Consolas"> Interface</font></span></b></div><div style="text-align: -webkit-auto;"><div><span style="font-family: Consolas; font-size: 15px;"><br/></span></div><div align="left"><div align="left"><span><font face="Consolas"><span style="font-size: 11pt;">            </span></font><font face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt"> </span></font><font color="#7F0055" face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt">onStart(</span></font><font color="#7F0055" face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt">downloaderId,</span></font> <font color="#7F0055" face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas" style="text-align: -webkit-auto;"><span style="font-size:11pt">fileLength);</span></font></span></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onResume(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">fileLength,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">totalDoneSize);</span></font></span></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onPaused(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId);</span></font></span></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onCanceled(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId);</span></font></span></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onHaveDone(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId);</span></font></span></div></div></div></div><div align="left" style="font-size: medium;"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><div style="font-size: medium;"><b><span style="text-align: -webkit-auto; font-size: 16px;"><font face="Consolas">3-3. </font></span><span style="font-size: 11pt; font-family: Consolas;">onOnSegmentInfoListener</span><span style="text-align: -webkit-auto; font-size: 16px;"><font face="Consolas"> Interface</font></span></b></div><div style="text-align: -webkit-auto;"><div style="font-size: medium;"><span style="font-family: Consolas; font-size: 15px;"><br/></span></div><div align="left"><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onSegStart(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">segId,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">segLength);</span></font></span></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">            </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:11pt">onSegAccomplish(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">downloaderId,</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">segId);</span></font></span></div></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><div><b><span style="text-align: -webkit-auto; font-size: 16px;"><font face="Consolas">3-4. </font></span><span style="font-size: 11pt; font-family: Consolas; text-align: -webkit-auto;">onOnErrorInfoListener</span><span style="text-align: -webkit-auto; font-size: 16px;"><font face="Consolas"> Interface</font></span></b></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size: 11pt;"><b><br/></b></span></font></div><div align="left"><span><font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>             public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>void</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">onError(</span></font><font color="#7F0055" face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;"><b>int</b></span></font> <font face="Consolas"><span style="font-size: 11pt; background-position: initial initial; background-repeat: initial initial;">downloaderId, String errInfo);</span></font></span></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div></div></div></div><div style="font-size: medium;"><hr/></div><div style="font-size: 16px;"><b><font face="Consolas">4. </font><span style="font-family: Consolas;">Constants</span></b></div><div style="font-size: medium;"><font face="Consolas"><span style="font-size: 15px;"><br/></span></font></div><div style="font-size: medium;"><span style="font-family: Consolas; font-size: 15px;">1)  </span><span style="font-family: Consolas; font-size: 15px; text-align: -webkit-left;">resumeStatusCode</span></div><div style="font-size: medium;"><span><font face="Consolas"><span style="font-size: 11pt;">    </span></font><font face="Consolas"><span style="font-size:11pt">   </span></font></span></div><div style="font-size: medium;"><span><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>      private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>final</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">FILE_DONE_PROPER</span> <span style="font-size:11pt">= 0;    </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:11pt">//file has been</span> <span style="font-size:11pt">downloaded</span> <span style="font-size:11pt">and can be found in path</span></font></span></div><div style="font-size: medium;"><span><font color="#3F7F5F" face="Consolas"><span style="font-size:11pt"><br/></span></font></span></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">      </span></font><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>final</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">FILE_DONE_THREADNUM</span></font></span><span style="font-size: 11pt; font-family: Consolas;">_CHANGED</span><font face="Consolas"> <span style="font-size:11pt">= 1;  </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:11pt">//file has been</span> <span style="font-size:11pt">downloaded</span> <span style="font-size:11pt">but can not be found in path</span></font></div><div align="left"><font color="#3F7F5F" face="Consolas"><span style="font-size:11pt"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">      </span></font><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>final</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">FILE_DONE_PATH</span></font></span><span style="font-size: 11pt; font-family: Consolas;">_CHANGED</span><font face="Consolas"> <span style="font-size:11pt">= 2;  </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:11pt">//file has been</span> <span style="font-size:11pt">downloaded</span> <span style="font-size:11pt">but can not be found in path</span></font></div><div align="left"><font color="#3F7F5F" face="Consolas"><span style="font-size:11pt"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">      </span></font><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>final</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">FILE_UNDONE_PROPER</span> <span style="font-size:11pt">= 3;  </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:11pt">//file download unaccomplished and can be found in path</span></font></span></div><div align="left"><span><font color="#3F7F5F" face="Consolas"><span style="font-size:11pt"><br/></span></font></span></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">      </span></font><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>final</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">FILE_UNDONE_THREADNUM</span></font></span><span style="font-size: 11pt; font-family: Consolas;">_CHANGED</span><font face="Consolas"> <span style="font-size:11pt">= 4;</span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:11pt">//file download unaccomplished but THREAD_NUM changes</span></font></div><div align="left"><font color="#3F7F5F" face="Consolas"><span style="font-size:11pt"><br/></span></font></div><div align="left"><span><font face="Consolas"><span style="font-size:11pt">      </span></font><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>final</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:11pt">FILE_UNDONE_PATH</span></font></span><span style="font-size: 11pt; font-family: Consolas;">_CHANGED</span><font face="Consolas"> <span style="font-size:11pt">= 5;</span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:11pt">//file download unaccomplished but can not be found in path</span></font></div><div align="left"><font color="#3F7F5F" face="Consolas"><span style="font-size:11pt"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      </span></font><font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>final</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:11pt"><b>int</b></span></font> <span style="font-size: 11pt; font-family: Consolas;">FILE_FIRST_TIME_DOWNLOAD</span><font face="Consolas"> <span style="font-size:11pt">= 6;</span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size: 11pt;">//file never be</span> <span style="font-size: 11pt;">downloaded</span></font></div><div style="font-size: medium;"><span><br/></span></div><div style="font-size: medium;"><hr/></div><div><div style="font-size: 16px;"><b><font face="Consolas">5. </font><span style="font-family: Consolas;">Permissions </span></b></div><div><span style="font-size: 11pt; font-family: Consolas;"><br/></span></div><div><span style="font-size: 11pt; font-family: Consolas;">1)  For Android usage, the following permissions must be added:</span></div><div align="left"><font face="Consolas"><span style="font-size:11pt">        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;">        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt; </span></font></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;"><br/></span></font></div><hr/><hr/><div align="left"><font face="Consolas"><span style="font-size: 11pt;">  #Current version:6.0   </span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  #version 1.0    @20140705</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Enable basic download features with one download thread</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  #version 2.0    @20140714</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Enable multiThreads download</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Unify message pack and unpack process</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Enrich sending back message type</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  #version 3.0      @20140714</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Encapsulate caller's message handler and provide a unified onFileDonloaderListener for interacting.</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">        User only need to implement the interface to write the callback functions to events emitted by FileDownloader.</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  #version 4.0      @20140715</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Enable listening to message in different classes;Using Static HandlerGroup instead of Singleton HandlerCenter.</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  #version 4.1    @20140722</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Introduce STATE RESUME which sends message to indicate resume download </span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;add public method reDownload()</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;policy declaration has been invoked in constructor</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  #version 5.0    @20140723</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Enable resume-download when user's</span> <span style="font-size:11pt"><u>app</u></span> <span style="font-size:11pt">restarts</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Improve implementation mechanism when successively press runDownload</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Introduce STATE HAVEDONE which sends message to indicate file has been download already</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Introduce STATE RESUMESESSION which sends message when download session is resumed(such as</span> <span style="font-size:11pt"><u>App</u></span> <span style="font-size:11pt">restarts)</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">      &gt;&gt;Add two RESUME callback arguments</span></font></div><div><span style="font-size: 11pt; font-family: Consolas;">      &gt;&gt;Changes cancelDownload method content to adapt to resume-download</span><span style="font-family: Consolas; font-size: 15px;"> </span><span style="font-family: Consolas; font-size: 15px;"> </span></div><div><span style="font-family: Consolas; font-size: 15px;">  #version 6.0    @20140820</span></div><div><span style="font-family: Consolas; font-size: 15px;">      &gt;&gt;Make HandlerGroup more thread safe</span></div><div><span style="font-family: Consolas; font-size: 15px;">      &gt;&gt;re-organize listener interface</span><span style="font-family: Consolas; font-size: 15px;">  </span></div></div><div><span style="font-family: Consolas; font-size: 15px;"><br/></span></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  Written by:GuYiwei</span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt">  Email:Yiwei.gu09</span><span style="font-size:11pt"><u>@gmail.com</u></span></font></div><div align="left"><font face="Consolas"><span style="font-size:11pt"> </span></font></div><div align="left"><font face="Consolas"><span style="font-size: 11pt;">  IN ACCORDANCE WITH GPL LICENECE</span></font></div></div>
</div></body></html> 